import{_ as d}from"./PulseAnimatedBox-47c5f030.js";import{u as C}from"./academic-class-8198b7a6.js";import{I as A,r as w,J as j,E as B,j as D,o as u,b as m,e as t,f as v,F as y,g as f,l as S,d as F,t as k}from"./index-e1aafd27.js";import{u as N}from"./department-class-subject-aee6eb52.js";import"./bundle-mjs-3a7afad5.js";const V=A("academicSubject",()=>{const i=w(!0),c=w([]),_=w({}),p=w([]);async function g(l,r,o){var n;i.value=!0;try{const e=await j.get(`/api/departments/${l}/academic-sessions/${r}/academic-classes/${o}/academic-subjects`),{data:a={}}=e;c.value=(a==null?void 0:a.academic_subjects)||[],p.value=(n=c.value)==null?void 0:n.map(s=>s.department_class_subject_id)}catch(e){console.log(e)}i.value=!1}async function b(l,r,o){i.value=!0;try{const n=await j.post(`/api/departments/${l}/academic-sessions/${r}/academic-classes/${o}/academic-subjects`,{department_class_subject_ids:p.value}),{data:e={}}=n;_.value=(e==null?void 0:e.academic_subject)||[]}catch(n){console.log(n)}await g(l,r,o),i.value=!1}async function h(l,r,o,n){i.value=!0;try{const e=await j.get(`/api/departments/${l}/academic-sessions/${r}/academic-classes/${o}/academic-subjects/${n}`),{data:a={}}=e;_.value=(a==null?void 0:a.academic_subject)||[]}catch(e){console.log(e)}i.value=!1}return{loader:i,academic_subjects:c,department_class_subject_ids:p,academic_subject:_,index:g,save:b,show:h}}),E={class:"container mx-auto flex flex-col items-center gap-4 mt-4"},L=t("div",{class:"flex items-center justify-between gap-4"},[t("h2",{class:"text-center text-2xl font-bold"},"Academic Subjects")],-1),I={class:"w-full max-w-3xl flex flex-col md:flex-row gap-4"},J={class:"w-full"},M={class:"w-full border border-cyan-400 rounded p-3 flex flex-col items-center gap-3"},O=t("div",{class:"text-center font-bold"},"Selected For Academic Subject",-1),P={class:"w-full"},R={class:"w-full border border-slate-400 rounded p-3 flex flex-col items-center gap-3"},T=t("div",{class:"text-center font-bold"},"Department Subject List",-1),q=["checked","onClick"],z={key:2,class:"flex justify-center items-center px-4 py-1.5"},W={__name:"IndexPage",setup(i){const c=V(),_=C(),p=N(),g=B(),{departmentId:b,academicSessionId:h,academicClassId:l}=g.params;function r(){o.value=!1,c.save(b,h,l)}const o=w(!1);function n(e,a){const s=c.department_class_subject_ids.indexOf(a);s!==-1&&c.department_class_subject_ids.splice(s,1),e.target.checked&&c.department_class_subject_ids.push(a),o.value=!0}return D(()=>{c.index(b,h,l),_.show(b,h,l).then(()=>{p.index(b,_.academic_class.department_class_id)})}),(e,a)=>(u(),m("div",E,[L,t("div",I,[t("div",J,[t("div",M,[O,v(c).loader?(u(),m(y,{key:0},[f(d,{class:"w-full h-8",items:["65%"]}),f(d,{class:"w-full h-8",items:["50%"]}),f(d,{class:"w-full h-8",items:["60%"]}),f(d,{class:"w-full h-8",items:["40%"]})],64)):(u(!0),m(y,{key:1},S(v(c).academic_subjects,s=>{var x;return u(),m("div",{key:s.id,class:"w-full px-3 py-2 bg-white rounded border flex items-center justify-between gap-2"},[t("div",null,k((x=s==null?void 0:s.department_class_subject)==null?void 0:x.name),1)])}),128))])]),t("div",P,[t("div",R,[T,v(p).loader?(u(),m(y,{key:0},[f(d,{class:"w-full h-8",items:["20px","50%"]}),f(d,{class:"w-full h-8",items:["20px","60%"]}),f(d,{class:"w-full h-8",items:["20px","40%"]}),f(d,{class:"w-full h-8",items:["20px","65%"]})],64)):(u(!0),m(y,{key:1},S(v(p).department_class_subjects,s=>{var x;return u(),m("div",{key:s.id,class:"w-full px-3 py-1.5 bg-white rounded-md border flex items-center gap-2"},[t("input",{type:"checkbox",checked:(x=v(c).department_class_subject_ids)==null?void 0:x.includes(s.id),onClick:$=>n($,s.id)},null,8,q),t("div",null,k(s.name),1)])}),128)),o.value?(u(),m("div",z,[t("button",{type:"button",onClick:r,class:"btn-2"},"Save Change")])):F("",!0)])])])]))}};export{W as default};
