import{I as Q,r as m,J as S,m as K,E as W,j as X,o as l,b as d,e as t,n as h,F as N,l as H,f as u,q as Y,h as y,t as c,d as v,p as P,v as Z,G as L,x as w,L as R}from"./index-8e0a7070.js";import{u as tt}from"./students-afe9839d.js";const et=Q("csm/payments",()=>{const x=m(!0),r=m([]),f=m({});async function k(g,n){x.value=!0,r.value=[];try{const s=await S.get(`/api/csm/academic-classes/${g}/students/${n}/payments`),{data:i={}}=s;r.value=(i==null?void 0:i.payments)||[]}catch(s){console.log(s)}x.value=!1}async function C(g,n,s={}){x.value=!0,f.value={};try{const i=await S.post(`/api/csm/academic-classes/${g}/students/${n}/payments`,s),{data:p={}}=i;f.value=(p==null?void 0:p.payment)||{}}catch(i){console.log(i)}x.value=!1}async function _(g,n,s){x.value=!0,f.value={};try{const i=await S.get(`/api/csm/academic-classes/${g}/students/${n}/payments/${s}`),{data:p={}}=i;f.value=(p==null?void 0:p.payment)||{}}catch(i){console.log(i)}x.value=!1}return{payments:r,payment:f,index:k,show:_,store:C}}),st={class:"container mx-auto"},ot={class:"flex flex-col items-center justify-center mt-2 gap-4"},nt={class:"flex flex-wrap gap-2 justify-center mt-4"},it={key:0,class:"flex flex-col gap-4"},rt=t("h2",{class:"text-center text-2xl font-bold"},"Collect Fees",-1),lt={class:"grid md:grid-cols-2 grid-cols-1 gap-4"},dt={class:"fee-list flex flex-col gap-2 w-80"},at=["onClick"],ct=["value"],pt={class:"flex items-center justify-between w-full"},ut={class:"text-lg"},gt={class:""},vt=["onSubmit"],ht={class:"flex flex-col gap-1 bg-white rounded p-4 border border-gray-300 w-80"},xt=t("h3",{class:"text-xl font-semibold text-center"},"Invoice",-1),ft={class:"flex flex-col"},mt=t("hr",{class:"my-2 border-t border-gray-300"},null,-1),bt={class:"grid grid-col gap-1"},_t=t("strong",null,"Name: ",-1),yt=t("strong",null,"Class: ",-1),wt={class:"grid grid-cols-2 text-sm"},kt=t("strong",null,"Roll: ",-1),Ct={class:"text-right"},jt=t("strong",null,"Reg: ",-1),St=t("div",{class:"my-2 flex flex-row justify-between bg-gray-200 px-2 font-bold"},[t("p",null,"purpose"),t("p",null,"Amount")],-1),Nt={class:"px-2"},Pt={class:"flex justify-between items-center"},Rt={class:"font-semibold"},Dt={class:"text-gray-600"},Mt=t("hr",{class:"my-2 border-t border-gray-300"},null,-1),Vt={class:"flex justify-between items-center"},$t=t("p",{class:"font-semibold"},"Subtotal:",-1),Tt={class:"text-gray-600 font-semibold"},At=t("hr",{class:"my-2 border-t border-gray-300"},null,-1),It={class:"font-semibold"},Ft={class:"font-semibold"},Ut=t("hr",{class:"my-2 border-t border-gray-300"},null,-1),Bt={class:"flex justify-between items-center"},Ot=t("p",{class:"font-semibold"},"Total Amount:",-1),zt={class:"text-xl font-bold"},Gt=t("hr",{class:"my-2 border-t border-gray-300"},null,-1),Ht={class:"flex justify-between items-center"},Lt=t("label",{for:"deposit",class:"font-semibold"},"Deposited:",-1),qt=t("br",null,null,-1),Et=t("hr",{class:"my-2 border-t border-gray-300"},null,-1),Jt={class:"flex justify-between items-center text-red-500"},Qt=t("p",{class:"font-semibold"},"Due:",-1),Kt={class:"text-xl font-bold"},Wt=t("hr",{class:"my-2 border-t border-gray-300"},null,-1),Xt={class:""},Yt={class:"flex gap-1 text-xs"},Zt={class:""},te=t("div",null,[t("label",{for:"received",class:"ms-2"},"I have received above amount of money")],-1),ee={class:"mt-1.5"},se=t("strong",null,"Received by: ",-1),oe={key:0,class:"flex gap-2 justify-center"},ne=t("button",{type:"submit",class:"border border-cyan-600 px-4 rounded text-cyan-600 hover:bg-cyan-600 hover:text-white"}," Save ",-1),ie=[ne],re={key:1,class:"w-full max-w-3xl md:p-8 p-4 bg-white rounded shadow-md"},le=t("div",{class:"text-center"},[t("h1",{class:"text-3xl font-bold text-cyan-700"},"Student Profile")],-1),de={class:"border"},ae={class:"p-2"},ce=t("div",{class:"flex items-center bg-gray-100 mb-2 justify-between px-2"},[t("h3",{class:"text-lg font-semibold"},"Student Information"),t("div",{class:"cursor-pointer hover:text-blue-600"},[t("i",{class:"fad fa-edit"})])],-1),pe={class:"flex flex-col md:flex-row px-2 justify-between gap-4"},ue=w('<div class="grid gap-1"><p><strong>Name:</strong> [Student Name]</p><p><strong>Gender:</strong> [Gender]</p><p><strong>Date of Birth:</strong> [Date of Birth]</p><p><strong>Blood Group:</strong> [Blood Group]</p><p><strong>Birth Certificate No:</strong> [Birth Certificate No]</p></div>',1),ge={class:"text-center col-span-1"},ve={class:"flex items-center justify-center"},he={for:"studentPhoto",class:"cursor-pointer"},xe={key:0,src:R,alt:"Student Photo",class:"h-28 w-28 object-cover rounded-full border"},fe={key:1,class:"h-28 w-28 p-2 bg-gray-100 rounded-md flex items-center justify-center border-2 border-gray-700"},me=t("div",{class:"flex flex-col gap-2 text-gray-500 hover:text-cyan-600"},[t("i",{class:"fad fa-file-upload text-xl"}),t("h4",{class:""},"Upload Photo")],-1),be=[me],_e=t("h4",{for:"studentPhoto",class:"block text-sm font-medium text-gray-700"}," Student Photo ",-1),ye=w('<div class="border p-2 my-2"><div class="flex items-center bg-gray-100 mb-2 justify-between px-2"><h3 class="text-lg font-semibold">Parental Information</h3><div class="cursor-pointer hover:text-blue-600"><i class="fad fa-edit"></i></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-2 px-2"><div class="grid grid-cols-1"><p><strong>Father&#39;s Name:</strong> [Father&#39;s Name]</p><p><strong>Phone:</strong> [Father&#39;s Phone]</p><p><strong>Occupation:</strong> [Father&#39;s Occupation]</p></div><hr class="md:hidden"><div class="md:border-l md:pl-2"><div class="grid grid-cols-1"><p><strong>Mother&#39;s Name:</strong> [Mother&#39;s Name]</p><p><strong>Phone:</strong> [Mother&#39;s Phone]</p><p><strong>Occupation:</strong> [Mother&#39;s Occupation]</p></div></div></div></div><div class="border p-2 my-2"><div class="flex items-center bg-gray-100 mb-2 justify-between px-2"><h3 class="text-lg font-semibold">Guardian Information</h3><div class="cursor-pointer hover:text-blue-600"><i class="fad fa-edit"></i></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-1 px-2"><p><strong>Name:</strong> [Guardian&#39;s Name]</p><p><strong>Relation:</strong> [Relation]</p><p><strong>Phone:</strong> [Guardian&#39;s Phone]</p></div></div><div class="border p-2 my-2"><div class="flex items-center bg-gray-100 mb-2 justify-between px-2"><h3 class="text-lg font-semibold">Address</h3><div class="cursor-pointer hover:text-blue-600"><i class="fad fa-edit"></i></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-2 px-2"><div class="grid grid-cols-1 gap-1"><h4 class="font-semibold">Current Address</h4><p><strong>House No. </strong>House No.</p><p><strong>Road No. </strong>Road No.</p><p><strong>Village: </strong>Village Village</p><p><strong>Post office: </strong>Post office</p><p><strong>Upazilla: </strong>Upazilla Upazilla</p><p><strong>District: </strong>District</p><p><strong>Division: </strong>Division</p></div><hr class="md:hidden"><div class="md:border-l md:pl-2"><div class="grid grid-cols-1 gap-1"><h4 class="font-semibold">Permanent Address</h4><p><strong>House No. </strong>House No.</p><p><strong>Road No. </strong>Road No.</p><p><strong>Village: </strong>Village Village</p><p><strong>Post office: </strong>Post office</p><p><strong>Upazilla: </strong>Upazilla Upazilla</p><p><strong>District: </strong>District</p><p><strong>Division: </strong>Division</p></div></div></div></div><div class="border p-2 my-2"><div class="flex items-center bg-gray-100 mb-2 justify-between px-2"><h3 class="text-lg font-semibold">Academic Information</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-1 px-2"><p><strong>Class:</strong> [Class]</p><p><strong>Roll:</strong> [Roll]</p><p><strong>Registration:</strong> [Registration]</p><p><strong>Session:</strong> [Session]</p></div></div>',4),we={key:2},ke={class:"flex flex-wrap gap-8 md:flex-row justify-center"},Ce={class:"w-[204px] space-y-2"},je=t("h3",{class:"text-center font-bold print:hidden mt-4"},"সামনের অংশ",-1),Se={class:"h-[324px] border bg-white"},Ne=w('<div class="flex flex-col items-center justify-center gap-1 pt-2.5 pb-1.5"><img src="'+R+'" class="h-9" alt="Logo"><div class="flex flex-col items-center justify-end space-y-1"><h2 class="text-[13px] font-bold text-cyan-950">Madrasah Name</h2></div></div><div class="flex h-[20px] items-center justify-center bg-cyan-600 text-white mt-[-5px]"><h2 class="text-[11px] mt-[3px]">শিক্ষার্থীর পরিচয়পত্র</h2></div><div class="mt-[50px] h-[118px] bg-cyan-900"><div class="mx-auto -mb-11 aspect-[50/50] w-[90px] -translate-y-1/2 overflow-hidden border-2 border-cyan-500 rounded-lg"><img src="'+R+'" class="h-full w-full object-cover"></div><div class="text-center text-[13px] font-semibold text-white"><h1 class="pb-[2px] line-clamp-1 mt-[2px] text-cyan-100">{ student.name }</h1><div class="flex items-center justify-center gap-2 text-[10px]"><div class="w-20 shrink-0 grow-0 text-right">শ্রেণী :</div><div class="shrink grow text-left">{ Current Class }</div></div><div class="flex items-center justify-center gap-2 text-[10px]"><div class="w-20 shrink-0 grow-0 text-right">রোল :</div><div class="shrink grow text-left">{ student.roll }</div></div><div class="flex items-center justify-center gap-2 text-[10px]"><div class="w-20 shrink-0 grow-0 text-right">রেজি. নং :</div><div class="shrink grow text-left">{ student.registration }</div></div></div></div>',3),Pe={class:"flex h-[38px] items-center justify-center"},Re=["src"],De=t("div",{class:"flex items-center justify-center"},[t("p",{class:"text-[10px] font-bold text-cyan-950"},"অধ্যক্ষের স্বাক্ষর")],-1),Me=w('<div class="w-[204px] space-y-2"><h3 class="text-center font-bold print:hidden mt-4">পিছনের অংশ</h3><div class="relative h-[324px] border bg-white py-2.5"><div class="flex items-center justify-center gap-1 text-[10px] font-bold"><div class="shrink-0 grow-0">মেয়াদ :</div><div class="shrink-0 grow-0">{ মেয়াদ }</div></div><p class="text-center text-[10px]">তথ্য যাচাইয়ের জন্য স্ক্যান করুন</p><div class="mt-1 flex items-center justify-center"><img class="h-[91px] w-[91px] border border-black p-1 rounded-lg" src="https://upload.wikimedia.org/wikipedia/commons/5/5e/QR_Code_example.png" alt=""></div><p class="mt-2 px-8 text-center text-[9px]"> পরিচয়পত্রটি কোথাও পাওয়া গেলে নিম্নোক্ত যেকোন ঠিকানায় পৌঁছে দিন </p><h3 class="mt-2 text-center text-[10px] font-bold">শিক্ষার্থীর ঠিকানা</h3><div class="px-8 text-center text-[9px]"> { বর্তমান ঠিকানা }, { থানা এরিয়া }, { ডিস্ট্রিক্ট জেলা } </div><div class="flex items-center justify-center gap-1 text-[9px] font-bold"><div class="shrink-0 grow-0">অভিভাবকের ফোন :</div><div class="shrink-0 grow-0">{ 0123456789 }</div></div><div class="absolute bottom-0 left-0 right-0 z-10 w-full"><div class="flex flex-col items-center justify-end space-y-1 bg-cyan-900 py-2 text-white"><h2 class="text-[12px] font-bold text-cyan-100">{ প্রতিষ্ঠানের নাম }</h2><h2 class="px-6 text-center text-[8px] font-bold text-white"> { প্রতিষ্ঠানের নাম ঠিকানা } </h2><div class="flex items-center justify-center gap-1 text-[9px] font-bold"><div class="shrink-0 grow-0">ফোন :</div><div class="shrink-0 grow-0">{ প্রতিষ্ঠানের ফোন }</div></div></div></div></div></div>',1),Ve={key:3},$e={key:4},Te=w('<div><div class="bg-white shadow rounded md:w-96 w-80 p-4"><h2 class="text-center text-2xl font-bold">Migration Form</h2><p class="text-center">Current Class Info</p><div class="grid grid-col gap-1"><p><strong>Name: </strong>{Student Name}</p><p><strong>Class: </strong>{Class}</p><div class="grid grid-cols-2 text-sm"><p><strong>Roll: </strong>{123}</p><p><strong>Reg: </strong>{12356}</p></div></div><hr class="my-2 border-t border-gray-300"><p class="text-center">Migrated To</p><label for="MigratedTo">Select Class</label><select name="MigratedTo" id="MigratedTo" class="rounded w-full border-2 border-gray-300 focus:border-2 focus:border-cyan-300 focus:ring focus:ring-cyan-200 focus:ring-opacity-50"><option value="1">Option 1</option><option value="2">Option 1</option><option value="3">Option 1</option><option value="4">Option 1</option></select><div class="flex gap-2 justify-center mt-4"><button class="border border-cyan-600 px-4 rounded text-cyan-600 hover:bg-cyan-600 hover:text-white"> Save </button></div></div></div>',1),Ae=[Te],Ie={key:5},Be={__name:"StudentView",setup(x){const r=tt(),f=et(),k=K(),C=W(),{academicClassId:_,studentId:g}=C.params,n=m("fees"),s=m([]),i=m(0),p=m(!1),b=a=>{n.value=a},D=()=>s.value.reduce((a,e)=>a+e.amount,0),M=()=>D()-(r.student.account??0),q=a=>s.value.includes(a),E=a=>{const e=s.value.indexOf(a);e===-1?s.value.push(a):s.value.splice(e,1)};X(()=>{r.show(_,g)});function J(){f.store(_,g,{selected_fees:s.value,deposit:i.value}).then(()=>{r.show(_,g),s.value=[],i.value=0,p.value=!1})}return(a,e)=>{var V,$,T,A,I,F,U,B,O,z;return l(),d("div",st,[t("div",ot,[t("div",nt,[t("button",{class:h(["border-2 border-cyan-600 rounded-md p-1 px-2 md:px-4 text-cyan-600",{"bg-cyan-600 text-white":n.value==="fees"}]),onClick:e[0]||(e[0]=o=>b("fees"))}," Collect Fees ",2),t("button",{class:h(["border-2 border-cyan-600 rounded-md p-1 px-2 md:px-4 text-cyan-600",{"bg-cyan-600 text-white":n.value==="profile"}]),onClick:e[1]||(e[1]=o=>b("profile"))}," Profile ",2),t("button",{class:h(["border-2 border-cyan-600 rounded-md p-1 px-2 md:px-4 text-cyan-600",{"bg-cyan-600 text-white":n.value==="idCard"}]),onClick:e[2]||(e[2]=o=>b("idCard"))}," ID Card ",2),t("button",{class:h(["border-2 border-cyan-600 rounded-md p-1 px-2 md:px-4 text-cyan-600",{"bg-cyan-600 text-white":n.value==="resulCard"}]),onClick:e[3]||(e[3]=o=>b("resulCard"))}," Result Card ",2),t("button",{class:h(["border-2 border-cyan-600 rounded-md p-1 px-2 md:px-4 text-cyan-600",{"bg-cyan-600 text-white":n.value==="migration"}]),onClick:e[4]||(e[4]=o=>b("migration"))}," Migration ",2),t("button",{class:h(["border-2 border-cyan-600 rounded-md p-1 px-2 md:px-4 text-cyan-600",{"bg-cyan-600 text-white":n.value==="tc"}]),onClick:e[5]||(e[5]=o=>b("tc"))}," TC Paper ",2)]),n.value==="fees"?(l(),d("div",it,[rt,t("div",lt,[t("div",dt,[(l(!0),d(N,null,H(u(r).fees,(o,j)=>(l(),d("div",{key:j,class:h([{"border-2 border-cyan-600 text-cyan-600":q(o)},"flex items-center gap-4 bg-white rounded shadow px-4 py-2 transition-transform transform hover:scale-105 hover:text-cyan-600 cursor-pointer"]),onClick:G=>E(o)},[P(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=G=>s.value=G),value:o,class:"form-checkbox"},null,8,ct),[[L,s.value]]),t("div",pt,[t("h4",ut,c(o.name),1),t("p",gt,"৳ "+c(o.amount),1)])],10,at))),128))]),t("form",{onSubmit:Y(J,["prevent"]),class:"flex flex-col gap-4"},[t("div",ht,[xt,t("div",ft,[mt,t("div",bt,[t("p",null,[_t,y(c(u(r).student.name),1)]),t("p",null,[yt,y(c(u(r).student.class_name),1)]),t("div",wt,[t("p",null,[kt,y(c(u(r).student.roll),1)]),t("p",Ct,[jt,y(c(u(r).student.registration),1)])])])]),St,t("div",Nt,[s.value.length>0?(l(),d(N,{key:0},[(l(!0),d(N,null,H(s.value,(o,j)=>(l(),d("div",{key:j},[t("div",Pt,[t("p",Rt,c(o.name),1),t("p",Dt,"৳ "+c(o.amount),1)])]))),128)),Mt,t("div",Vt,[$t,t("p",Tt,"৳ "+c(D()),1)]),At],64)):v("",!0),t("div",null,[t("div",{class:h(["flex justify-between items-center",(($=(V=u(r))==null?void 0:V.student)==null?void 0:$.account)>0?"text-green-600":"text-red-600"])},[t("p",It," Previous "+c(((A=(T=u(r))==null?void 0:T.student)==null?void 0:A.account)>0?"Advance":"Due"),1),t("p",Ft," ৳ "+c(Math.abs(((F=(I=u(r))==null?void 0:I.student)==null?void 0:F.account)??0)),1)],2)]),Ut,t("div",Bt,[Ot,t("p",zt,"৳ "+c(M()),1)]),Gt,t("div",Ht,[Lt,qt,P(t("input",{class:"border-2 border-gray-300 focus:border-2 focus:border-cyan-300 focus:ring focus:ring-cyan-200 focus:ring-opacity-50 rounded-md block w-16 px-1 py-0.5 text-right",type:"number",required:"","onUpdate:modelValue":e[7]||(e[7]=o=>i.value=o)},null,512),[[Z,i.value]])]),Et,t("div",Jt,[Qt,t("p",Kt," ৳ "+c(M()-i.value),1)])]),Wt,t("div",Xt,[t("div",Yt,[t("div",Zt,[P(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>p.value=o),type:"checkbox",value:"received",class:"form-checkbox",id:"received"},null,512),[[L,p.value]])]),te]),t("div",ee,[t("p",null,[se,y(c((B=(U=u(k))==null?void 0:U.user)==null?void 0:B.name),1)])])])]),p.value&&(((z=(O=u(r))==null?void 0:O.student)==null?void 0:z.account)!==0||s.value.length>0||i.value>0)&&i.value>=0?(l(),d("div",oe,ie)):v("",!0)],40,vt)])])):v("",!0),n.value==="profile"?(l(),d("div",re,[le,t("div",de,[t("div",ae,[ce,t("div",pe,[ue,t("div",ge,[t("div",ve,[t("label",he,[a.studentPhoto?(l(),d("img",xe)):(l(),d("div",fe,be))]),t("input",{type:"file",id:"studentPhoto",class:"hidden",onChange:e[9]||(e[9]=(...o)=>a.handlePhotoChange&&a.handlePhotoChange(...o))},null,32)]),_e])])])]),ye])):v("",!0),n.value==="idCard"?(l(),d("div",we,[t("div",ke,[t("div",Ce,[je,t("div",Se,[Ne,t("div",Pe,[a.signature?(l(),d("img",{key:0,src:a.signature,class:"h-full w-full object-contain"},null,8,Re)):v("",!0)]),De])]),Me])])):v("",!0),n.value==="resulCard"?(l(),d("div",Ve,"No Result Available")):v("",!0),n.value==="migration"?(l(),d("div",$e,Ae)):v("",!0),n.value==="tc"?(l(),d("div",Ie,"this is tc")):v("",!0)])])}}};export{Be as default};
