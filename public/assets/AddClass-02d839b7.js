import{x as F,r as m,B as b,C as T,u as $,j as B,o as i,b as u,e,t as v,p as f,q,m as j,v as D,g as A,d as I,F as g,f as w,l as M,w as R,R as E}from"./index-f801e1a5.js";import{u as L,_ as V}from"./department-5aa5bb5b.js";const P=F("departmentClass",()=>{const r=m(!1),l=m([]),p=m({});async function n(a){r.value=!0;try{const t=await b.get(`/api/departments/${a}/classes`),{data:s={}}=t;l.value=(s==null?void 0:s.department_classes)||[]}catch(t){console.log(t)}r.value=!1}async function h(a,t={}){r.value=!0;try{const s=await b.post(`/api/departments/${a}/classes`,t),{data:o={}}=s;p.value=(o==null?void 0:o.department_class)||[]}catch(s){console.log(s)}r.value=!1}async function _(a,t={}){r.value=!0;try{const s=await b.put(`/api/departments/${a}/classes/`+t.id,t),{data:o={}}=s;p.value=(o==null?void 0:o.department)||[]}catch(s){console.log(s)}r.value=!1}return{loader:r,department_classes:l,department_class:p,index:n,create:h,update:_}}),U={class:"contaner mx-auto flex flex-col items-center gap-4 mt-4"},z={class:"flex items-center justify-between gap-4"},G={class:"text-center text-2xl font-bold"},H=e("i",{class:"fal fa-plus-square"},null,-1),J=[H],K={class:"flex justify-center z-40"},O=["onSubmit"],Q={class:"text-xl font-semibold text-center"},W={class:"flex flex-col gap-2"},X=e("hr",{class:"border-t border-gray-300"},null,-1),Y={class:""},Z=e("strong",null,"Added by: ",-1),ee=e("button",{type:"submit",class:"border border-cyan-600 px-4 rounded text-cyan-600 hover:bg-cyan-600 hover:text-white"}," Save ",-1),te={class:"w-full flex flex-wrap gap-4 justify-center"},se={key:0,class:"flex justify-center items-center text-red-500 py-6"},ae={class:"flex flex-wrap justify-center items-center gap-2"},oe={class:"md:text-xl font-bold"},ne=["onClick"],re=e("i",{class:"fal fa-edit"},null,-1),le=[re],ce=e("div",{class:"flex flex-col items-center mt-8 bg-white p-2 rounded gap-2 shadow"},[e("i",{class:"far fa-exclamation-triangle text-3xl"}),e("h1",{class:"text-xl"},"Caution"),e("div",{class:"text-red-500"},"**The most sensetive area of this software.")],-1),pe={__name:"AddClass",setup(r){const l=T(),p=L(),n=P(),h=$(),_=m(!1),a=(y=null)=>{if(o(),y){const c=n.department_classes.find(x=>x.id===y);c&&(t.value={...c},s.value="update")}_.value=!_.value};B(()=>{p.show(l.params.departmentId),n.index(l.params.departmentId),o()});const t=m({}),s=m("create");function o(){s.value="create",t.value={name:"",description:"",is_active:!0}}async function N(){n[s.value](l.params.departmentId,t.value).then(()=>{n.index(l.params.departmentId),a()})}return(y,c)=>{var x,k,C,S;return i(),u("div",U,[e("div",z,[e("h2",G," Add Classs of "+v((k=(x=f(p))==null?void 0:x.department)==null?void 0:k.name),1),e("div",null,[e("button",{onClick:a,class:"hover:text-cyan-600"},J)])]),e("div",K,[_.value?(i(),u("form",{key:0,onSubmit:q(N,["prevent"]),class:"absolute flex flex-col gap-2 bg-white rounded-lg p-4 border-gray-300 w-80 md:w-96 shadow-2xl"},[e("h3",Q,v(s.value==="create"?"Add":"Edit")+" Department Class ",1),e("div",W,[j(e("input",{class:"border-2 border-gray-300 focus:border-2 focus:border-cyan-300 focus:ring focus:ring-cyan-200 focus:ring-opacity-50 rounded block w-full px-2 py-1",type:"Text",required:"",placeholder:"Name","onUpdate:modelValue":c[0]||(c[0]=d=>t.value.name=d)},null,512),[[D,t.value.name]]),j(e("textarea",{class:"border-2 border-gray-300 focus:border-2 focus:border-cyan-300 focus:ring focus:ring-cyan-200 focus:ring-opacity-50 rounded block w-full px-2 py-1",type:"Text",placeholder:"Description","onUpdate:modelValue":c[1]||(c[1]=d=>t.value.description=d),rows:"10"},null,512),[[D,t.value.description]])]),X,e("div",Y,[e("div",null,[e("p",null,[Z,A(" "+v(f(h).user.name),1)])])]),e("div",{class:"flex gap-2 justify-between"},[e("button",{type:"button",class:"border border-red-600 px-4 rounded text-red-600 hover:bg-red-600 hover:text-white",onClick:a}," Cancel "),ee])],40,O)):I("",!0)]),e("div",te,[f(n).loader?(i(),u(g,{key:0},[w(V,{class:"main-card"}),w(V,{class:"main-card"})],64)):(i(),u(g,{key:1},[(S=(C=f(n))==null?void 0:C.department_classes)!=null&&S.length?(i(!0),u(g,{key:1},M(f(n).department_classes,d=>(i(),u("div",{key:d.id,class:"main-card"},[e("div",ae,[e("h2",oe,v(d.name),1),e("div",null,[e("button",{onClick:de=>a(d.id),class:"hover:text-cyan-600"},le,8,ne)])]),w(f(E),{to:"/settings/department/class/add-subject",class:"btn-1"},{default:R(()=>[A(" Add Subject ")]),_:1})]))),128)):(i(),u("div",se,"No data found!"))],64))]),ce])}}};export{pe as default};
